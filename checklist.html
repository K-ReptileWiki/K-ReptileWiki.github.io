<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ìœ¡ ì²´í¬ë¦¬ìŠ¤íŠ¸ - K-ReptileWiki</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        .pet-selector {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .pet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .pet-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            text-align: center;
        }
        
        .pet-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .pet-card.selected {
            border-color: #667eea;
            background: #e3e8ff;
        }
        
        .pet-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .add-pet-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
            transition: background 0.3s;
        }
        
        .add-pet-btn:hover {
            background: #5568d3;
        }
        
        .checklist-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .section-title {
            font-size: 1.5em;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .check-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .check-item:hover {
            background: #e9ecef;
        }
        
        .check-item.completed {
            background: #d4edda;
        }
        
        .checkbox {
            width: 25px;
            height: 25px;
            cursor: pointer;
            margin-right: 15px;
        }
        
        .check-label {
            flex: 1;
            font-size: 1.1em;
            color: #333;
        }
        
        .check-input {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 0.95em;
            width: 120px;
        }
        
        .time-display {
            color: #666;
            font-size: 0.9em;
            margin-left: 10px;
        }
        
        .progress-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
        }
        
        .modal-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
        }
        
        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .no-pet-message {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .no-pet-message h2 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¦ ì‚¬ìœ¡ ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>
            <p class="subtitle">ì¼ì¼ ì¼€ì–´ ê¸°ë¡ìœ¼ë¡œ ê±´ê°•í•œ ì‚¬ìœ¡í™˜ê²½ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>
        </div>
        
        <div class="pet-selector">
            <div class="section-header">
                <h2>ë‚´ ë°˜ë ¤ íŒŒì¶©ë¥˜</h2>
                <button class="add-pet-btn" onclick="openAddPetModal()">+ ì¶”ê°€í•˜ê¸°</button>
            </div>
            <div class="pet-grid" id="petGrid"></div>
        </div>
        
        <div id="checklistContainer"></div>
    </div>
    
    <div class="modal" id="addPetModal">
        <div class="modal-content">
            <h2>ìƒˆ ë°˜ë ¤ë™ë¬¼ ì¶”ê°€</h2>
            <input type="text" class="modal-input" id="petNameInput" placeholder="ì´ë¦„ (ì˜ˆ: ì´ˆì½”)">
            <select class="modal-input" id="petSpeciesInput">
                <option value="">ì¢…ì„ ì„ íƒí•˜ì„¸ìš”</option>
                <option value="í¬ë ˆìŠ¤í‹°ë“œ ê²Œì½”">í¬ë ˆìŠ¤í‹°ë“œ ê²Œì½”</option>
                <option value="ë ˆì˜¤íŒŒë“œ ê²Œì½”">ë ˆì˜¤íŒŒë“œ ê²Œì½”</option>
                <option value="ë³¼ íŒŒì´í†¤">ë³¼ íŒŒì´í†¤</option>
                <option value="ì½˜ ìŠ¤ë„¤ì´í¬">ì½˜ ìŠ¤ë„¤ì´í¬</option>
                <option value="ë¹„ì–´ë””ë“œ ë“œë˜ê³¤">ë¹„ì–´ë””ë“œ ë“œë˜ê³¤</option>
                <option value="ë¸”ë£¨í…… ìŠ¤í‚¹í¬">ë¸”ë£¨í…… ìŠ¤í‚¹í¬</option>
            </select>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeAddPetModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="addPet()">ì¶”ê°€</button>
            </div>
        </div>
    </div>
    
    <script>
        let pets = [];
        let selectedPetId = null;
        let checklistData = {};
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¡œë“œ
        function loadData() {
            const savedPets = localStorage.getItem('reptilePets');
            const savedChecklist = localStorage.getItem('reptileChecklist');
            
            if (savedPets) {
                pets = JSON.parse(savedPets);
            }
            
            if (savedChecklist) {
                checklistData = JSON.parse(savedChecklist);
            }
            
            if (pets.length > 0) {
                selectedPetId = pets[0].id;
            }
        }
        
        function saveData() {
            localStorage.setItem('reptilePets', JSON.stringify(pets));
            localStorage.setItem('reptileChecklist', JSON.stringify(checklistData));
        }
        
        function openAddPetModal() {
            document.getElementById('addPetModal').classList.add('active');
        }
        
        function closeAddPetModal() {
            document.getElementById('addPetModal').classList.remove('active');
            document.getElementById('petNameInput').value = '';
            document.getElementById('petSpeciesInput').value = '';
        }
        
        function addPet() {
            const name = document.getElementById('petNameInput').value.trim();
            const species = document.getElementById('petSpeciesInput').value;
            
            if (!name || !species) {
                alert('ì´ë¦„ê³¼ ì¢…ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const newPet = {
                id: Date.now(),
                name: name,
                species: species,
                icon: getSpeciesIcon(species)
            };
            
            pets.push(newPet);
            selectedPetId = newPet.id;
            
            // ìƒˆ í«ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë°ì´í„° ì´ˆê¸°í™”
            checklistData[newPet.id] = getDefaultChecklist();
            
            saveData();
            closeAddPetModal();
            renderPets();
            renderChecklist();
        }
        
        function getSpeciesIcon(species) {
            const icons = {
                'í¬ë ˆìŠ¤í‹°ë“œ ê²Œì½”': 'ğŸ¦',
                'ë ˆì˜¤íŒŒë“œ ê²Œì½”': 'ğŸ¦',
                'ë³¼ íŒŒì´í†¤': 'ğŸ',
                'ì½˜ ìŠ¤ë„¤ì´í¬': 'ğŸ',
                'ë¹„ì–´ë””ë“œ ë“œë˜ê³¤': 'ğŸ¦–',
                'ë¸”ë£¨í…… ìŠ¤í‚¹í¬': 'ğŸ¦'
            };
            return icons[species] || 'ğŸ¦';
        }
        
        function getDefaultChecklist() {
            const today = new Date().toISOString().split('T')[0];
            return {
                date: today,
                items: {
                    temperature: { checked: false, value: '', time: '' },
                    humidity: { checked: false, value: '', time: '' },
                    feeding: { checked: false, value: '', time: '' },
                    water: { checked: false, value: '', time: '' },
                    cleaning: { checked: false, value: '', time: '' },
                    health: { checked: false, value: '', time: '' }
                }
            };
        }
        
        function renderPets() {
            const grid = document.getElementById('petGrid');
            
            if (pets.length === 0) {
                grid.innerHTML = '<div class="no-pet-message"><h2>ì•„ì§ ë“±ë¡ëœ ë°˜ë ¤ë™ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤</h2><p>+ ì¶”ê°€í•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ì²« ë°˜ë ¤ë™ë¬¼ì„ ë“±ë¡í•˜ì„¸ìš”!</p></div>';
                return;
            }
            
            grid.innerHTML = pets.map(pet => `
                <div class="pet-card ${pet.id === selectedPetId ? 'selected' : ''}" onclick="selectPet(${pet.id})">
                    <div class="pet-icon">${pet.icon}</div>
                    <h3>${pet.name}</h3>
                    <p style="color: #666; font-size: 0.9em;">${pet.species}</p>
                </div>
            `).join('');
        }
        
        function selectPet(petId) {
            selectedPetId = petId;
            renderPets();
            renderChecklist();
        }
        
        function renderChecklist() {
            const container = document.getElementById('checklistContainer');
            
            if (!selectedPetId) {
                container.innerHTML = '';
                return;
            }
            
            const today = new Date().toISOString().split('T')[0];
            
            if (!checklistData[selectedPetId] || checklistData[selectedPetId].date !== today) {
                checklistData[selectedPetId] = getDefaultChecklist();
            }
            
            const data = checklistData[selectedPetId];
            const items = data.items;
            
            const totalItems = Object.keys(items).length;
            const completedItems = Object.values(items).filter(item => item.checked).length;
            const progress = (completedItems / totalItems) * 100;
            
            container.innerHTML = `
                <div class="checklist-section">
                    <div class="section-header">
                        <div class="section-title">
                            ğŸ“‹ ì˜¤ëŠ˜ì˜ ì¼€ì–´ ì²´í¬ë¦¬ìŠ¤íŠ¸
                        </div>
                        <div style="font-size: 1.1em; color: #667eea; font-weight: bold;">
                            ${completedItems} / ${totalItems} ì™„ë£Œ
                        </div>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%">
                            ${Math.round(progress)}%
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <div class="check-item ${items.temperature.checked ? 'completed' : ''}">
                            <input type="checkbox" class="checkbox" 
                                ${items.temperature.checked ? 'checked' : ''}
                                onchange="updateCheckItem('temperature', this.checked)">
                            <span class="check-label">ğŸŒ¡ï¸ ì˜¨ë„ í™•ì¸</span>
                            <input type="text" class="check-input" placeholder="ì˜ˆ: 28Â°C" 
                                value="${items.temperature.value}"
                                onchange="updateCheckValue('temperature', this.value)">
                            <span class="time-display">${items.temperature.time}</span>
                        </div>
                        
                        <div class="check-item ${items.humidity.checked ? 'completed' : ''}">
                            <input type="checkbox" class="checkbox" 
                                ${items.humidity.checked ? 'checked' : ''}
                                onchange="updateCheckItem('humidity', this.checked)">
                            <span class="check-label">ğŸ’§ ìŠµë„ í™•ì¸</span>
                            <input type="text" class="check-input" placeholder="ì˜ˆ: 60%" 
                                value="${items.humidity.value}"
                                onchange="updateCheckValue('humidity', this.value)">
                            <span class="time-display">${items.humidity.time}</span>
                        </div>
                        
                        <div class="check-item ${items.feeding.checked ? 'completed' : ''}">
                            <input type="checkbox" class="checkbox" 
                                ${items.feeding.checked ? 'checked' : ''}
                                onchange="updateCheckItem('feeding', this.checked)">
                            <span class="check-label">ğŸ– ë¨¹ì´ ê¸‰ì—¬</span>
                            <input type="text" class="check-input" placeholder="ì˜ˆ: ê·€ëšœë¼ë¯¸ 5ë§ˆë¦¬" 
                                value="${items.feeding.value}"
                                onchange="updateCheckValue('feeding', this.value)">
                            <span class="time-display">${items.feeding.time}</span>
                        </div>
                        
                        <div class="check-item ${items.water.checked ? 'completed' : ''}">
                            <input type="checkbox" class="checkbox" 
                                ${items.water.checked ? 'checked' : ''}
                                onchange="updateCheckItem('water', this.checked)">
                            <span class="check-label">ğŸ’¦ ë¬¼ êµì²´</span>
                            <input type="text" class="check-input" placeholder="ë©”ëª¨" 
                                value="${items.water.value}"
                                onchange="updateCheckValue('water', this.value)">
                            <span class="time-display">${items.water.time}</span>
                        </div>
                        
                        <div class="check-item ${items.cleaning.checked ? 'completed' : ''}">
                            <input type="checkbox" class="checkbox" 
                                ${items.cleaning.checked ? 'checked' : ''}
                                onchange="updateCheckItem('cleaning', this.checked)">
                            <span class="check-label">ğŸ§¹ ì²­ì†Œ ë° ì ê²€</span>
                            <input type="text" class="check-input" placeholder="ë©”ëª¨" 
                                value="${items.cleaning.value}"
                                onchange="updateCheckValue('cleaning', this.value)">
                            <span class="time-display">${items.cleaning.time}</span>
                        </div>
                        
                        <div class="check-item ${items.health.checked ? 'completed' : ''}">
                            <input type="checkbox" class="checkbox" 
                                ${items.health.checked ? 'checked' : ''}
                                onchange="updateCheckItem('health', this.checked)">
                            <span class="check-label">ğŸ¥ ê±´ê°• ìƒíƒœ ì²´í¬</span>
                            <input type="text" class="check-input" placeholder="ì˜ˆ: ì–‘í˜¸" 
                                value="${items.health.value}"
                                onchange="updateCheckValue('health', this.value)">
                            <span class="time-display">${items.health.time}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function updateCheckItem(itemKey, checked) {
            const data = checklistData[selectedPetId];
            data.items[itemKey].checked = checked;
            
            if (checked) {
                const now = new Date();
                data.items[itemKey].time = now.toLocaleTimeString('ko-KR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            }
            
            saveData();
            renderChecklist();
        }
        
        function updateCheckValue(itemKey, value) {
            checklistData[selectedPetId].items[itemKey].value = value;
            saveData();
        }
        
        // ì´ˆê¸°í™”
        loadData();
        renderPets();
        renderChecklist();
        
        // ìì •ì— ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¦¬ì…‹
        setInterval(() => {
            const now = new Date();
            if (now.getHours() === 0 && now.getMinutes() === 0) {
                Object.keys(checklistData).forEach(petId => {
                    checklistData[petId] = getDefaultChecklist();
                });
                saveData();
                renderChecklist();
            }
        }, 60000);
    </script>
</body>
</html>
